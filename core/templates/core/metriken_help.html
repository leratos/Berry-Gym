{% extends 'base.html' %}
{% load static %}

{% block title %}Metriken & Kennzahlen - HomeGym{% endblock %}

{% block page_nav %}
<nav class="navbar navbar-expand-lg navbar-page mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'dashboard' %}">
      <i class="bi bi-house-fill"></i> HomeGym
    </a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'dashboard' %}">
            <i class="bi bi-arrow-left"></i> Zur√ºck zum Dashboard
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">üìä Metriken & Kennzahlen erkl√§rt</h1>
            <p class="lead">Verstehe deine Trainingsmetriken und wie sie berechnet werden</p>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h3 class="mb-0">üéØ Performance Form-Index</h3>
                </div>
                <div class="card-body">
                    <h5>Was ist das?</h5>
                    <p>Der <strong>Performance Form-Index</strong> ist ein Score von 0-100, der deine aktuelle Trainingsform bewertet.</p>
                    <h5 class="mt-4">Wie wird er berechnet?</h5>
                    <p>Der Index setzt sich aus 4 Faktoren zusammen (insgesamt 100 Punkte):</p>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead><tr><th>Faktor</th><th>Max. Punkte</th><th>Beschreibung</th></tr></thead>
                            <tbody>
                                <tr><td><strong>Trainingsfrequenz</strong></td><td>30</td><td>Wie oft du diese Woche trainierst<br><small class="text-muted">Optimal: 3-5x/Woche. Berechnung: Trainings √ó 7,5 (max. 30)</small></td></tr>
                                <tr><td><strong>Konsistenz (Streak)</strong></td><td>25</td><td>Wie viele Wochen ohne Unterbrechung<br><small class="text-muted">Berechnung: Wochen √ó 2,5 (max. 25)</small></td></tr>
                                <tr><td><strong>Intensit√§t (RPE)</strong></td><td>25</td><td>Durchschnittlicher RPE der letzten 2 Wochen<br><small class="text-muted">RPE 7-8 = 25 Pkt | RPE 6-9 = 20 Pkt | sonst = 10 Pkt</small></td></tr>
                                <tr><td><strong>Volumen-Trend</strong></td><td>20</td><td>Entwicklung deines Volumens (letzte 4 Wochen)<br><small class="text-muted">Steigend = 20 | leichter R√ºckgang (>80%) = 15 | stark = 10</small></td></tr>
                            </tbody>
                        </table>
                    </div>
                    <h5 class="mt-4">Bewertung:</h5>
                    <ul class="list-unstyled">
                        <li><span class="badge bg-success">80-100</span> Ausgezeichnet üî•</li>
                        <li><span class="badge bg-info">60-79</span> Gut üëç</li>
                        <li><span class="badge bg-warning text-dark">40-59</span> Solide ‚ö°</li>
                        <li><span class="badge bg-danger">0-39</span> Ausbauf√§hig üí™</li>
                    </ul>
                    <div class="alert alert-info mt-3"><strong>üí° Tipp:</strong> Fokussiere dich auf Konsistenz!</div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-danger text-white">
                    <h3 class="mb-0">üò¥ Erm√ºdungs-Index</h3>
                </div>
                <div class="card-body">
                    <h5>Was ist das?</h5>
                    <p>Der <strong>Erm√ºdungs-Index</strong> zeigt (0-100+), wie ersch√∂pft dein K√∂rper ist. Hohe Werte = Pause!</p>
                    <h5 class="mt-4">Berechnung (3 Faktoren):</h5>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead><tr><th>Faktor</th><th>Max.</th><th>Beschreibung</th></tr></thead>
                            <tbody>
                                <tr><td><strong>Volumen-Spike</strong></td><td>40</td><td>>30% Anstieg = 40 | >20% = 30 | >10% = 15</td></tr>
                                <tr><td><strong>Hoher RPE</strong></td><td>30</td><td>RPE >8.5 = 30 | RPE >8 = 20</td></tr>
                                <tr><td><strong>Hohe Frequenz</strong></td><td>30</td><td>‚â•6/Woche = 30 | ‚â•5/Woche = 15</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <h5 class="mt-4">Bewertung:</h5>
                    <ul class="list-unstyled">
                        <li><span class="badge bg-danger">‚â•60</span> Hoch ‚ö†Ô∏è ‚Üí Deload empfohlen!</li>
                        <li><span class="badge bg-warning text-dark">40-59</span> Moderat ‚ö° ‚Üí Mehr Regeneration</li>
                        <li><span class="badge bg-info">20-39</span> Niedrig üëç ‚Üí Gute Balance</li>
                        <li><span class="badge bg-success">0-19</span> Sehr niedrig ‚úÖ ‚Üí Noch mehr m√∂glich</li>
                    </ul>
                    <div class="alert alert-warning mt-3"><strong>‚ö†Ô∏è Achtung:</strong> Hoher Erm√ºdungs-Index erh√∂ht das Verletzungsrisiko!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">üí™ 1RM (One-Rep Max)</h3>
                </div>
                <div class="card-body">
                    <h5>Was ist das?</h5>
                    <p>Dein <strong>1RM</strong> ist das theoretische Maximalgewicht f√ºr eine einzelne Wiederholung.</p>
                    <h5 class="mt-4">Epley-Formel:</h5>
                    <div class="alert alert-secondary"><code>1RM = Gewicht √ó (1 + Wiederholungen √∑ 30)</code></div>
                    <p><strong>Beispiel:</strong> 100kg √ó 5 Wdh ‚Üí 1RM = 100 √ó 1,167 = <strong>116,7 kg</strong></p>
                    <div class="alert alert-info mt-3"><strong>üí° Hinweis:</strong> Am genauesten bei 3-8 Wiederholungen.</div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h3 class="mb-0">üìà Trainingsvolumen</h3>
                </div>
                <div class="card-body">
                    <h5>Berechnung:</h5>
                    <div class="alert alert-secondary"><code>Volumen = Gewicht √ó Wiederholungen √ó S√§tze</code></div>
                    <p><strong>Beispiel:</strong> 80kg √ó 10 √ó 3 = 2.400 kg | 100kg √ó 8 √ó 4 = 3.200 kg ‚Üí Gesamt: <strong>5.600 kg</strong></p>
                    <h5 class="mt-4">Wissenschaftlich empfohlen:</h5>
                    <ul>
                        <li><strong>10-20 S√§tze</strong> pro Muskelgruppe/Woche</li>
                        <li>Schrittweise Erh√∂hung (Progressive Overload)</li>
                        <li>Deload alle 4-6 Wochen</li>
                    </ul>
                    <div class="alert alert-warning mt-3"><strong>‚ö†Ô∏è Vorsicht:</strong> >20% Volumen-Anstieg/Woche erh√∂ht das Verletzungsrisiko!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-warning">
                    <h3 class="mb-0">üéØ RPE (Rate of Perceived Exertion)</h3>
                </div>
                <div class="card-body">
                    <h5>Die RPE-Skala (0-10):</h5>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead><tr><th>RPE</th><th>Beschreibung</th><th>RIR</th></tr></thead>
                            <tbody>
                                <tr><td><strong>10</strong></td><td>Maximale Anstrengung</td><td>0 Wdh √ºbrig</td></tr>
                                <tr><td><strong>9</strong></td><td>Sehr schwer</td><td>1 Wdh √ºbrig</td></tr>
                                <tr><td><strong>8</strong></td><td>Schwer</td><td>2 Wdh √ºbrig</td></tr>
                                <tr><td><strong>7</strong></td><td>Moderat schwer</td><td>3 Wdh √ºbrig</td></tr>
                                <tr><td><strong>6</strong></td><td>Moderat</td><td>4 Wdh √ºbrig</td></tr>
                                <tr><td><strong>‚â§5</strong></td><td>Leicht</td><td>5+ Wdh √ºbrig</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="alert alert-info mt-3"><strong>üí° Empfehlung:</strong> Hypertrophie: RPE 7-9 | Kraft: RPE 8-9,5 | Ausdauer: RPE 6-8</div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h3 class="mb-0">üîÑ Progressive Overload</h3>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <h6>1Ô∏è‚É£ Gewicht erh√∂hen</h6>
                        <p>Erh√∂he um 2,5-5kg wenn alle S√§tze mit RPE &lt;7 geschafft.</p>
                        <div class="alert alert-secondary"><strong>Beispiel:</strong> 100kg √ó 8 ‚Üí 102,5kg √ó 8</div>
                    </div>
                    <div class="mb-3">
                        <h6>2Ô∏è‚É£ Wiederholungen erh√∂hen</h6>
                        <p>Bei 12+ Wdh: Gewicht erh√∂hen, Wdh reduzieren.</p>
                        <div class="alert alert-secondary"><strong>Beispiel:</strong> 80kg √ó 12 ‚Üí 85kg √ó 8</div>
                    </div>
                    <div class="mb-3">
                        <h6>3Ô∏è‚É£ S√§tze erh√∂hen</h6>
                        <div class="alert alert-secondary"><strong>Beispiel:</strong> 3 S√§tze ‚Üí 4 S√§tze</div>
                    </div>
                    <div class="alert alert-success mt-3"><strong>‚úÖ Regel:</strong> Nur EINEN Faktor pro Training erh√∂hen!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 mb-4">
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <h3 class="mb-0">üìÖ Deload-Woche</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Wann Deload?</h5>
                            <ul>
                                <li>Alle <strong>4-6 Wochen</strong> (intensives Training)</li>
                                <li>Bei <strong>Erm√ºdungs-Index ‚â•60</strong></li>
                                <li>Bei Ersch√∂pfung oder Stagnation</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5>Wie Deload?</h5>
                            <ul>
                                <li><strong>Volumen: -40-50%</strong></li>
                                <li><strong>Intensit√§t: -10%</strong></li>
                                <li>Gleiche √úbungen, RPE 5-7</li>
                            </ul>
                        </div>
                    </div>
                    <div class="alert alert-success mt-3"><strong>üí° Wichtig:</strong> Deload ist essentiell f√ºr langfristigen Fortschritt und Verletzungspr√§vention!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mb-4">
        <a href="{% url 'dashboard' %}" class="btn btn-primary btn-lg">‚Üê Zur√ºck zum Dashboard</a>
    </div>
</div>
{% endblock %}
