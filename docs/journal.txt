# Berry-Gym Development Journal

## Abgeschlossen: Phase 4.2 ‚Äì Database Indexes

**Datum:** 2026-02-15
**Transcript:** 2026-02-15-16-52-06-phase-4-2-4-3-db-indexes-caching.txt

Compound Indexes auf Training/Plan Models. Migration, Tests, MariaDB-kompatibel.

## Abgeschlossen: Phase 4.3 ‚Äì Caching Strategy

**Datum:** 2026-02-15
**Transcript:** 2026-02-15-18-01-12-phase-4-3-caching-complete.txt

FileBasedCache, Dashboard/Template-Caching, Cache-Invalidierung via signals.py.

## Abgeschlossen: Phase 4.4 ‚Äì Load Testing

**Datum:** 2026-02-15
**Transcript:** 2026-02-15-19-08-19-phase-4-4-load-testing-complete.txt

Locust Setup, SLO-Analyse, Performance-Baseline. Django-Axes-Interference behoben.

## Abgeschlossen: Phase 4 Abschluss + Resume Training Feature

**Datum:** 2026-02-15
**Transcript:** 2026-02-15-20-35-34-phase-4-completion-resume-training-feature.txt

"Training fortsetzen"-Button, abgeschlossen-Feld Migration, README v0.9.1.

## Abgeschlossen: Phase 5.0 ‚Äì Algorithm Audit

**Datum:** 2026-02-15
**Transcript:** 2026-02-15-21-50-56-phase-5-0-algorithm-audit-completion.txt

1RM-Skalierung, Plateau-Erkennung, Junk-Volume, Push/Pull-Ratio Bugfixes.

## Abgeschlossen: Phase 5.1 ‚Äì Scientific Source System

**Datum:** 2026-02-16
**Transcript:** 2026-02-16-03-40-38-phase-5-1-sources-adherence-bugfix.txt

Model, Migration, Management Command, Views, Templates, Tests.
adherence_rate >100% Bugfix.

## Abgeschlossen: PDF Export Bugfixes (5.1)

**Datum:** 2026-02-16
**Transcript:** 2026-02-16-04-39-38-pdf-export-bugfixes-phase-5-1.txt

7 Bugs: Push/Pull-Schwelle, 1RM-Monats-Fenster, Template-Labels. 481 Tests gr√ºn.

## Abgeschlossen: Phase 5.2 ‚Äì KI Plangenerator (LLM Upgrade)

**Datum:** 2026-02-16
**Transcript:** 2026-02-16-19-26-27-phase-5-2-llm-upgrade-gemini.txt

Llama 3.1 70B ‚Üí Gemini 2.5 Flash via OpenRouter.
√Ñnderungen: ai_config.py, llm_client.py, prompt_builder.py, test_plan_generator.py.

## Abgeschlossen: Phase 5.2 ‚Äì Prompt Optimierung & Smart Retry

**Datum:** 2026-02-16
**Transcripts:** phase-5-2-prompt-optimization-retry, phase-5-2-smart-retry-dynamic-tokens

Temperature-Fix, Equipment-Filter, Smart Retry, Dynamic max_tokens.

## Abgeschlossen: Phase 5.2 ‚Äì Streaming (SSE)

**Datum:** 2026-02-17
**Transcript:** 2026-02-17-11-56-35-phase-5-2-streaming-sse-implementation.txt

Server-Sent Events f√ºr AI-Plangenerierung. 6 Dateien ge√§ndert, 21/21 Tests.

## Hotfix: apply_beta.html + Encoding

**Datum:** 2026-02-17
**Transcript:** 2026-02-17-12-50-33-apply-beta-encoding-fix-hotfix.txt

TemplateDoesNotExist behoben. BOM + double-encoded UTF-8 repariert.

## Hotfix: Gemini JSON Komma-Fix

**Datum:** 2026-02-17
**Transcript:** 2026-02-17-13-14-55-gemini-json-comma-fix-deployment.txt

Regex-Fix f√ºr fehlende Kommas in Gemini-JSON-Output.

## Hotfix: Active Plan Override Fix

**Datum:** 2026-02-17
**Transcript:** 2026-02-17-13-59-27-active-plan-override-fix.txt

Neue AI-Pl√§ne √ºberschreiben nicht mehr automatisch aktiven Wochenzyklus.

## Abgeschlossen: Phase 5.2 ‚Äì Schwachstellen-Coverage Validierung

**Datum:** 2026-02-17
**Transcripts:** weakness-coverage-validation, ai-plan-weakness-coverage-prompt-optimization

Post-Generation Coverage-Check, UI-Warnungen, Prompt-Umstrukturierung.
0/4 ‚Üí 4/4 Schwachstellen-Coverage. Bauch, Adduktoren, H√ºftbeuger zuverl√§ssig.

### Dateien
- ai_coach/prompt_builder.py
- ai_coach/plan_generator.py
- core/views/ai_recommendations.py
- core/templates/core/ai_plan_generator.html

## Abgeschlossen: Phase 5.2 ‚Äì KI-Plangenerator Optimierung (vollst√§ndig)

**Datum:** 2026-02-17
**Commit:** 9eb913d

### Alle Akzeptanzkriterien erf√ºllt
- ‚úÖ Eindeutige Plan-Namen: Prompt + Fallback in plan_generator.py
- ‚úÖ Kontextbasierter Split: Frequenz-Feld + JS-Auto-Suggestion
- ‚úÖ Schwachstellen-Coverage: Pflicht-Block + Validation + UI-Warning
- ‚úÖ Prompt-Qualit√§t: Coach-Regeln, Beispiele, Adduktoren-Fix

### Commits dieser Phase
- c643a37 Weakness coverage validation
- e019fef Schwachstellen als harte Pflicht-Anforderung
- f24930f Pull-Ruder-Redundanz + Waden-Pflicht (sp√§ter optional)
- 928eb71 Pull/Legs-Beispiele statt abstrakte Verbote
- 06090bd Waden optional, Adduktoren-Konsistenz
- 9eb913d Eindeutige Namen + kontextbasierter Split

### N√§chste Phase
4.2 ‚Äì Database Indexes

## Abgeschlossen: Bugfix ‚Äì Pausenzeit im Plan-Editor

**Datum:** 2026-02-17
**Commit:** 8d3bdf1

Pausenzeit war im Model vorhanden (PlanUebung.pausenzeit) aber weder
im Edit-Formular angezeigt noch gespeichert.

Fixes:
- View GET: pausenzeit in plan_uebungen_details
- View POST: pause_{id} lesen + PlanUebung.pausenzeit setzen
- Template: data-pausenzeit auf Karte, JS-State, Input-Feld mit ‚è± Icon

## Abgeschlossen: Phase 5.2b ‚Äì K√∂rpergewicht-Support & ML-Qualit√§t

**Datum:** 2026-02-17
**Branch:** feature/phase-5-2b-koerpergewicht-support
**Commits:** cb155a7, 99f0dc8, 256863d
**Tests:** 474 passed, 0 Fehler

### Was implementiert wurde

**Schritt 1 ‚Äì DB Migration:**
- Uebung.koerpergewicht_faktor (FloatField, default=1.0)
- Data Migration 0064: 14 √úbungen mit wissenschaftlich belegten Faktoren
  - Dips/Klimmz√ºge: 0.70 (Barnett 1995, Ronai 2014)
  - Liegest√ºtze: 0.65 (Suprak 2011)
  - Crunch/Sit-up: 0.30‚Äì0.35 (Anatomie Oberk√∂rper)
  - Plank/L-Sit: 0.00 (isometrisch)
- Migration 0065: Wadenheben (Stehend) + stehend (Calf Raises) ‚Üí KOERPERGEWICHT

**Schritt 2 ‚Äì Training Session UI:**
- Label "Zusatzgewicht (kg)" + Faktor-Hinweis (z.B. "ca. 70% KG wirkt als Last")
- Ghosting: leeres Feld statt 0 f√ºr KG-√úbungen ohne Zusatz
- Empfehlung: Wdh-Steigerung statt sinnlosem +2.5kg

**Schritt 3 ‚Äì Statistik:**
- _compute_1rm_and_weight(): effective_weight = (KG * Faktor) + Zusatz
- show_reps_chart: pr√ºft saetze.filter(gewicht__gt=0).exists() (Logikfix)

**Schritt 4 ‚Äì ML Trainer:**
- effective_weight als erstes Feature statt rohem Satz.gewicht
- KoerperWerte-Lookup mit 80kg-Fallback

**Schritt 5 ‚Äì ML Dashboard:**
- Reliability-Badges: Unzuverl√§ssig (R¬≤<0), Wenig Daten (<15), Schwach (R¬≤<0.5)
- unreliable_count im Dashboard-Context

### N√§chste Phase
5.3 ‚Äì AI/ML Testing

## In Arbeit: Phase 5.3 ‚Äì AI/ML Testing

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing (noch nicht erstellt)

### Status
- test_koerpergewicht_support.py: vollst√§ndig erstellt (327 Zeilen, ungetestet)
- test_ml_trainer.py: vollst√§ndig erstellt (273 Zeilen, ungetestet)
- test_plan_generator_new.py: kaputt ‚Äì falsche Imports, _normalize_plan_name
  existiert nicht als Methode (inline in generate()), wird neu geschrieben

### Dateien
- core/tests/test_koerpergewicht_support.py (neu)
- core/tests/test_ml_trainer.py (neu)
- ai_coach/tests/test_plan_generator.py (erweitern)

## Abgeschlossen: Phase 5.3 ‚Äì AI/ML Testing

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commit:** 52505ea
**Tests:** 541 passed (vorher 474), Coverage 22% ‚Üí 53%

### Implementierte Tests

**test_koerpergewicht_support.py (329 Zeilen):**
- _compute_1rm_and_weight(): alle Gewichtstypen (GESAMT, KOERPERGEWICHT, PRO_SEITE, ZEIT)
- koerpergewicht_faktor Anwendung mit Dips 0.70, Crunch 0.30
- Fallback 80kg bei fehlenden KoerperWerten
- _get_user_koerpergewicht() mit/ohne Eintr√§ge
- show_reps_chart Logik: reine KG vs. mit Zusatzgewicht
- _determine_empfehlung_hint() f√ºr KG-√úbungen (Wdh statt +2.5kg)

**test_ml_trainer.py (275 Zeilen):**
- get_training_data(): effective_weight Berechnung f√ºr KG/PRO_SEITE/GESAMT
- get_training_data(): Fallback 80kg, zu wenig Daten ‚Üí None
- train_model(): sklearn Training mit ausreichend Daten
- train_model(): Fehler-Dict bei zu wenig Daten
- train_all_user_models(): Batch-Training, Aufw√§rms√§tze ignoriert

**test_plan_generator.py (+167 Zeilen):**
- TestPlanNameFallback: generische Namen werden ersetzt (inline-Logik)
- TestValidateWeaknessCoverage: _validate_weakness_coverage() DB-Lookup

### Technische Details
- Keine Mocks f√ºr sklearn n√∂tig ‚Äì echtes Training mit Fixtures
- TestPlanNameFallback ohne DB (user_id=999 statt UserFactory)
- isort/Black/flake8: alle sauber

### Abgeschlossene Roadmap-Items
- Phase 5.3 ‚úÖ AI/ML Testing

### N√§chste Schritte
Phase 5.4 ‚Äì Charts & Statistics Testing

## Bugfix: Export/Import f√ºr √úbungsdatenbank erweitert

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commits:** d737064 (muscle-map Button), f3284dc (koerpergewicht_faktor), f9bfa74 (1RM Standards)

### Problem
√úbungs-Export/Import hatte Phase 5.2b Felder + 1RM Kraftstandards nicht ber√ºcksichtigt:
- koerpergewicht_faktor (Dips 0.70, Crunch 0.30) fehlte
- standard_beginner, standard_intermediate, standard_advanced, standard_elite fehlten
- beschreibung wurde nur mit hasattr gepr√ºft, nicht konsistent exportiert

### L√∂sung
**Export (JSON + CSV):**
- koerpergewicht_faktor als float hinzugef√ºgt
- standard_beginner (1RM Anf√§nger 80kg)
- standard_intermediate (1RM Fortgeschritten 80kg)
- standard_advanced (1RM Erfahren 80kg)
- standard_elite (1RM Elite 80kg)
- beschreibung konsistent exportiert

**Import (JSON):**
- koerpergewicht_faktor wird gelesen (default: 1.0 falls fehlt)
- Alle 4 Standard-Felder werden gelesen (nullable, kein Default)
- beschreibung wird gelesen (default: '' falls fehlt)

### Use Case
Vollst√§ndiger √úbungs-Export vom Test-Server auf Live-Server mit:
- Biomechanischen Faktoren (Phase 5.2b)
- Kraftstandards f√ºr alle 4 Level (Anf√§nger bis Elite)

### Dateien
- core/views/exercise_management.py (export_uebungen, _save_or_count_uebung)
- core/templates/core/muscle_map.html (Button-Fix)

## √úbungsdatenbank optimiert (initial_exercises.json)

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commit:** 9d5804e

### Ausgangslage
- 108 √úbungen, alle 20 Muskelgruppen abgedeckt
- 34 √úbungen (32%) ohne Kraftstandards
- 1 √úbung mit Fachbegriff ("Plantarflexion")

### Durchgef√ºhrte Optimierungen

**1. Beschreibungs-Verbesserung:**
- Wadenheben (Stehend): "Plantarflexion" ‚Üí "Zehenspitzen-Streckung"
- Anf√§ngerfreundliche Sprache

**2. Kraftstandards erg√§nzt (9 √úbungen):**
- Liegest√ºtze (Push-ups): 10/25/40/60
- Burpees (K√∂rpergewicht): 15/30/50/75
- Glute Bridge (K√∂rpergewicht): 20/40/60/80
- Bear Crawls (K√∂rpergewicht): 20/40/60/100 Meter
- Bird Dogs (K√∂rpergewicht): 20/40/60/80 (beide Seiten)
- Reverse Crunch (K√∂rpergewicht): 15/30/50/75
- Glute Kickbacks (K√∂rpergewicht): 20/40/60/80 (pro Seite)
- Mountain Climbers (K√∂rpergewicht): 20/40/60/100
- Fire Hydrants (K√∂rpergewicht): 20/40/60/80 (pro Seite)

### Ergebnis
- ‚úÖ √úbungen ohne Standards: 34 ‚Üí 25 (-26%)
- ‚úÖ Fachbegriffe: 1 ‚Üí 0
- ‚úÖ Alle wichtigen K√∂rpergewicht-√úbungen standardisiert

### Verbleibende √úbungen ohne Standards (25)
Haupts√§chlich:
- Widerstandsband-√úbungen (schwer standardisierbar)
- Sehr spezifische Isolations√ºbungen
- Beweglichkeits-/Mobility-√úbungen

### Qualit√§tsbewertung
**Vorher:** 8.5/10
**Nachher:** 9.0/10

**St√§rken:**
- Perfekte Muskelgruppen-Abdeckung (alle 20 Gruppen)
- Wissenschaftlich korrekte K√∂rpergewicht-Faktoren
- 100% Beschreibungs-Abdeckung
- Anf√§ngerfreundliche Sprache

### Dateien
- core/fixtures/initial_exercises.json (108 √úbungen)

## 5 neue √úbungen vom Server integriert

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commit:** d46ee21

### Ausgangslage
- Lokale initial_exercises.json: 108 √úbungen
- Server-Export: 113 √úbungen (5 zus√§tzliche)

### Neue √úbungen hinzugef√ºgt

1. **Brustpresse (Kabelzug)** - ID 112
   - Typ: PRO_SEITE, Muskelgruppe: BRUST
   - Beschreibung: Kabel auf Brusth√∂he. Griffe zusammenf√ºhren, Schulterbl√§tter stabil

2. **Brustpresse (Maschine)** - ID 113
   - Typ: GESAMT, Muskelgruppe: BRUST
   - Beschreibung: Sitz einstellen, kontrolliert dr√ºcken

3. **Farmers Carry** - ID 114
   - Typ: PRO_SEITE, Muskelgruppe: GANZK√ñRPER
   - Beschreibung: Schwere Gewichte seitlich halten, aufrecht gehen

4. **Pull-Through (Kabelzug)** - ID 115
   - Typ: GESAMT, Muskelgruppe: PO
   - Beschreibung: H√ºftstreckung mit Kabel, Fokus auf Po

5. **Seitst√ºtz (Side Plank)** - ID 116
   - Typ: ZEIT, Muskelgruppe: BAUCH
   - koerpergewicht_faktor: 0.0 (korrekt f√ºr ZEIT-√úbung)
   - Beschreibung: Seitliche Planke, H√ºfte oben halten

### Qualit√§tssicherung
‚úÖ Alle √úbungen haben Beschreibungen (Server-Export hatte leere Strings)
‚úÖ ZEIT-√úbung korrekt konfiguriert (faktor 0.0)
‚úÖ IDs automatisch vergeben (112-116)
‚úÖ Keine Duplikate

### Statistik
- **√úbungen vorher:** 108
- **√úbungen nachher:** 113
- **Server synchronisiert:** ‚úì

### Dateien
- core/fixtures/initial_exercises.json (+102 Zeilen)

## Kraftstandards f√ºr 5 neue √úbungen gesetzt

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commit:** f54b9e4

### Standards f√ºr 4 von 5 √úbungen

| √úbung | Typ | Anf√§nger | Fortgeschritten | Erfahren | Elite |
|-------|-----|----------|-----------------|----------|-------|
| **Brustpresse (Kabelzug)** | PRO_SEITE | 25 kg | 37.5 kg | 50 kg | 62.5 kg |
| **Brustpresse (Maschine)** | GESAMT | 70 kg | 100 kg | 130 kg | 160 kg |
| **Farmers Carry** | PRO_SEITE | 25 kg | 40 kg | 55 kg | 70 kg |
| **Pull-Through (Kabelzug)** | GESAMT | 30 kg | 50 kg | 70 kg | 90 kg |
| **Seitst√ºtz (Side Plank)** | ZEIT | - | - | - | - |

**Seitst√ºtz:** Keine 1RM-Standards (ZEIT-√úbung mit Sekunden)

### Rationale f√ºr Standards

**Brustpresse (Kabelzug):**
- ~50% von Langhantel-Bankdr√ºcken
- Kabelzug ist leichter zu kontrollieren
- Vergleich: Bankdr√ºcken KH 55/80/105/130 (gesamt)

**Brustpresse (Maschine):**
- +30% vs Langhantel (maschinengef√ºhrt = stabiler)
- H√∂her als freie Gewichte
- Vergleich: Bankdr√ºcken LH 55/80/105/130

**Farmers Carry:**
- Griffkraft-limitiert (nicht Beinkraft)
- 25-70kg pro Hand realistisch
- Elite = fast K√∂rpergewicht pro Hand

**Pull-Through (Kabelzug):**
- Deutlich leichter als Kreuzheben
- Fokus auf H√ºftstreckung, nicht maximales Gewicht
- ~30-40% von Kreuzheben-Standards

### Statistik
- **√úbungen ohne Standards:** 25 ‚Üí 21 (-16%)
- **Abdeckung:** 92/113 √úbungen (81%) haben jetzt Standards
- **Verbleibend:** Haupts√§chlich Widerstandsb√§nder & sehr spezifische √úbungen

### Dateien
- core/fixtures/initial_exercises.json

## Bugfix: Brustpresse Maschine in Equipment-Auswahl fehlte

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Problem:** Equipment "Brustpresse Maschine" war nicht in /equipment/ ausw√§hlbar

### Ursache
Die 5 neuen √úbungen (IDs 112-116) waren zwar in initial_exercises.json,
aber die Equipment-Verkn√ºpfungen waren nicht in der Datenbank gesetzt.

### L√∂sung
Equipment-Zuweisungen f√ºr alle 5 neuen √úbungen gesetzt:

1. **Brustpresse (Kabelzug)**
   - Equipment: Kabelzug / Latzug

2. **Brustpresse (Maschine)**
   - Equipment: Brustpresse Maschine ‚úì (vorher fehlte dies)

3. **Farmers Carry**
   - Equipment: Kettlebell, Kurzhanteln

4. **Pull-Through (Kabelzug)**
   - Equipment: Kabelzug / Latzug

5. **Seitst√ºtz (Side Plank)**
   - Equipment: Trainingsmatte

### Verifikation
```
Equipment: BRUSTPRESSE_MASCHINE
Zugeordnete √úbungen: 1 (Brustpresse (Maschine))
```

### Status
‚úÖ Brustpresse Maschine jetzt in /equipment/ verf√ºgbar
‚úÖ Alle 5 neuen √úbungen korrekt verkn√ºpft

**Hinweis:** Dieses Problem trat auf, weil initial_exercises.json eine
Fixture ist, die Equipment als String-Namen speichert. Bei manueller
Erstellung m√ºssen Equipment-Objekte explizit verkn√ºpft werden.

## Management Command zum Sync der Equipment-Verkn√ºpfungen

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commit:** eb9ce67

### Problem
Equipment "Brustpresse Maschine" war auf gym.last-strawberry.com nicht in /equipment/ ausw√§hlbar.

**Ursache:** Die Equipment-Verkn√ºpfungen f√ºr die 5 neuen √úbungen (IDs 112-116)
wurden nur lokal gesetzt, aber nicht auf dem Server.

### L√∂sung: Management Command

**Erstellt:** `core/management/commands/sync_equipment.py`

**Synchronisiert Equipment f√ºr:**
1. Brustpresse (Kabelzug) ‚Üí KABELZUG
2. Brustpresse (Maschine) ‚Üí BRUSTPRESSE_MASCHINE ‚úì
3. Farmers Carry ‚Üí KETTLEBELL, KURZHANTEL
4. Pull-Through (Kabelzug) ‚Üí KABELZUG
5. Seitst√ºtz (Side Plank) ‚Üí MATTE

### Ausf√ºhrung auf dem Server

**SSH auf den Server:**
```bash
ssh user@gym.last-strawberry.com
cd /pfad/zum/projekt
source venv/bin/activate
python manage.py sync_equipment
```

**Erwartete Ausgabe:**
```
================================================================================
EQUIPMENT-VERKN√úPFUNGEN SYNCHRONISIEREN
================================================================================
OK Brustpresse (Kabelzug)
  Equipment: Kabelzug / Latzug
OK Brustpresse (Maschine)
  Equipment: Brustpresse Maschine
...
√úbungen aktualisiert: 5
Alle Verkn√ºpfungen erfolgreich!
================================================================================

VERIFIKATION:
Brustpresse Maschine: 1 √úbung(en)
Equipment ist jetzt verf√ºgbar!
```

**Nach Ausf√ºhrung:** Brustpresse Maschine ist in /equipment/ verf√ºgbar ‚úì

### Features des Commands
- Erstellt fehlende Equipment-Objekte automatisch
- Setzt alle Verkn√ºpfungen korrekt
- Gibt detailliertes Feedback
- Verifiziert die Brustpresse Maschine
- Idempotent (kann mehrfach ausgef√ºhrt werden)

### Dateien
- core/management/commands/sync_equipment.py (NEU)
- core/management/__init__.py (existierte bereits)
- core/management/commands/__init__.py (existierte bereits)

## Fix: Brustpresse Maschine in Equipment-Auswahl fehlte

**Datum:** 2026-02-17
**Branch:** feature/phase-5-3-ai-ml-testing
**Commit:** 4945725

### Problem
"Brustpresse Maschine" erschien NICHT in der Equipment-Auswahl-UI
(/equipment/), obwohl sie:
- In der Datenbank existiert (Equipment-Objekt vorhanden)
- Mit der √úbung verkn√ºpft ist (via Admin verifiziert)
- In EQUIPMENT_CHOICES definiert ist (constants.py)

### Ursache
**View-Kategorisierung fehlte!**

In `core/views/exercise_management.py` (Zeile 56-67) wird die Equipment-UI
in Kategorien aufgeteilt. Die "Maschinen"-Kategorie hatte:
```python
"equipment": [
    "KABELZUG",
    "BEINPRESSE",
    "LEG_CURL",
    "LEG_EXT",
    "HACKENSCHMIDT",
    "RUDERMASCHINE",
    "ADDUKTOREN_MASCHINE",
    "ABDUKTOREN_MASCHINE",
    # BRUSTPRESSE_MASCHINE FEHLTE HIER!
],
```

**Equipment die NICHT in einer Kategorie sind, werden NICHT angezeigt!**

### L√∂sung
`BRUSTPRESSE_MASCHINE` zur Maschinen-Liste hinzugef√ºgt (Zeile 65):
```python
"equipment": [
    "KABELZUG",
    "BEINPRESSE",
    "LEG_CURL",
    "LEG_EXT",
    "HACKENSCHMIDT",
    "RUDERMASCHINE",
    "ADDUKTOREN_MASCHINE",
    "ABDUKTOREN_MASCHINE",
    "BRUSTPRESSE_MASCHINE",  # ‚Üê NEU
],
```

### Verifikation
Nach dem Fix:
- Brustpresse Maschine erscheint in der "Maschinen"-Kategorie (gelb, Gear-Icon)
- Kann vom User an-/abgew√§hlt werden
- Funktioniert sowohl lokal (127.0.0.1:8000) als auch auf dem Server

### Dateien
- core/views/exercise_management.py (+1 Zeile)

### Wichtig f√ºr zuk√ºnftige Equipment
**Neue Equipment m√ºssen in ZWEI Stellen gepflegt werden:**
1. `core/models/constants.py` ‚Üí EQUIPMENT_CHOICES (f√ºr DB)
2. `core/views/exercise_management.py` ‚Üí equipment_categories (f√ºr UI)

Ohne Schritt 2 ist das Equipment unsichtbar in der Auswahl!

## ROADMAP.md entfernt - Vereinfachung der Dokumentation

**Datum:** 2026-02-17
**Commit:** 3294178

### Problem
Zwei Roadmaps f√ºhrten zu Verwirrung:
- **ROADMAP.md** (Hauptordner, 1559 Zeilen) - veraltet (Stand 09.02.2026, vor Phase 3)
- **PROJECT_ROADMAP.md** (docs/, 243 Zeilen) - aktuell

### Entscheidung
ROADMAP.md l√∂schen, weil:
1. README.md hat bereits gute Feature-√úbersicht ("Aktuell verf√ºgbar v0.9.1")
2. PROJECT_ROADMAP.md ist technisch aber aktuell (Phasen-Tracking)
3. Weniger Maintenance-Overhead
4. Eine Quelle der Wahrheit

### √Ñnderungen
- ROADMAP.md gel√∂scht (1562 Zeilen)
- README.md: Link zu PROJECT_ROADMAP.md aktualisiert
- README.md: Projekt-Struktur bereinigt
- README.md: "Geplant (siehe ROADMAP.md)" ‚Üí "Geplant"
- CONTRIBUTING.md: Roadmap-Pfad aktualisiert

### Neue Dokumentationsstruktur
**√ñffentlich (f√ºr User):**
- README.md ‚Üí Feature-√úbersicht, aktueller Status
- README.md ‚Üí "üîÆ Roadmap & Known Limitations" Sektion

**Intern (f√ºr Developer/PM):**
- docs/PROJECT_ROADMAP.md ‚Üí Phasen-Tracking, Timeline, Test-Coverage-Ziele

### Dateien
- ROADMAP.md (gel√∂scht)
- README.md (3 √Ñnderungen)
- CONTRIBUTING.md (1 √Ñnderung)

## Phase 7 - Internationalisierung zur Roadmap hinzugef√ºgt

**Datum:** 2026-02-17
**Commit:** f73bebd

### Neue Phase: Week 9-10 - Internationalization (English Launch)

**Motivation:**
Nach dem deutschen Public Launch (Week 8) folgt die internationale Expansion.

**Vorteile:**
- **Gr√∂√üere Zielgruppe:** 500M+ User statt 80M (DACH)
- **Open Source:** 5-10x mehr Contributors weltweit
- **Marketing:** "AI-powered fitness tracker" ‚Üí bessere Suchbarkeit
- **Bereits vorbereitet:** Code/Comments auf Englisch, Django i18n

### Phasen-Struktur (30-47h ‚âà 1-1.5 Wochen)

**Phase 7.1 - i18n Framework Setup (2-4h):**
- Django i18n aktivieren (settings.py)
- Language-Switcher UI in Navigation
- Session-basierte Sprachwahl

**Phase 7.2 - Template Lokalisierung (8-12h):**
- 55+ Templates mit {% trans %} ausstatten
- ~200-300 Strings √ºbersetzen
- .po Dateien erstellen (DE + EN)

**Phase 7.3 - Model & Choice Lokalisierung (4-6h):**
- MUSKELGRUPPEN, EQUIPMENT_CHOICES mit gettext_lazy
- Dropdown-Werte √ºbersetzen
- Form-Labels & Help-Texts

**Phase 7.4 - Content Lokalisierung (6-10h):**
- 113 √úbungs-Beschreibungen √ºbersetzen
- README_EN.md erstellen
- Fitness-Fachbegriffe korrekt √ºbertragen

**Phase 7.5 - AI Coach Lokalisierung (4-6h, optional):**
- Prompt-Builder mit Sprach-Parameter
- Gemini 2.5 Flash kann DE & EN

**Phase 7.6 - Testing & QA (4-6h):**
- Language-Switch Tests
- PDF-Report auf Englisch
- √úbersetzungs-Coverage pr√ºfen

**Phase 7.7 - Documentation & Launch (2-3h):**
- README_EN.md finalisieren
- GitHub Language-Badges
- Social Media Announcement (Reddit, HN, ProductHunt)

### Success Criteria

**Must-Have:**
- ‚úÖ UI vollst√§ndig auf Englisch
- ‚úÖ 113/113 √úbungen √ºbersetzt
- ‚úÖ README_EN.md vorhanden
- ‚úÖ Language-Switcher funktioniert

**Nice-to-Have:**
- üîÑ AI Coach auf Englisch
- üîÑ URL-i18n (/en/dashboard)
- üîÑ Datum/Zeit-Formate lokalisiert

**Optional (Post-Launch):**
- ‚è≥ Weitere Sprachen (ES, FR, IT)
- ‚è≥ Community-√úbersetzungen (Crowdin)

### Timeline

- **Week 8:** Public Launch (Deutsch) üá©üá™
- **Week 9-10:** English i18n
- **Week 11:** English Public Launch üá¨üáßüá∫üá∏

### Aktualisierungen in PROJECT_ROADMAP.md

- Timeline-Tabelle um Week 9-10 erweitert
- Executive Summary: "International Expansion" hinzugef√ºgt
- Success Metrics: i18n-Metriken hinzugef√ºgt (Translation Coverage, GitHub Stars)
- Vollst√§ndige Phasen-Dokumentation (7.1-7.7)

### Dateien
- docs/PROJECT_ROADMAP.md (+283 Zeilen)

## PROJECT_ROADMAP.md auf aktuellen Stand gebracht

**Datum:** 2026-02-17
**Commit:** 9e32cbb

### Problem (vom User entdeckt!)
Die PROJECT_ROADMAP.md war komplett veraltet und durcheinander:

**Screenshot 1 (Timeline-Tabelle):**
- Week 4: Coverage 60% ‚Üê korrekt
- Week 5-6: Coverage 75% ‚Üê FALSCH (aktuell 53%)

**Screenshot 2 (Week 3):**
- Status: "IN PROGRESS"
- Coverage: 47%, 408 Tests ‚Üê VERALTET

**Screenshot 3 (Week 4):**
- Phase 4.1: ‚úÖ Abgeschlossen
- Phase 4.2-4.4: ‚è≥ "Noch zu tun" ‚Üê FALSCH (alle seit 15.02 abgeschlossen!)

**Aktueller Stand (korrekt):**
- Coverage: 53% (nicht 47% oder 75%)
- Tests: 541 passed (nicht 408)
- Alle Phasen bis 5.3 abgeschlossen
- N√§chste Phase: 5.4 (Charts Testing)

### Korrekturen

#### **Timeline-Tabelle:**
- Week 7: ‚è≥ Planned ‚Üí üîÑ IN PROGRESS (Phase 5.4 l√§uft)

#### **Week 3 ‚Äì Refactoring & Quality:**
- Status: "IN PROGRESS" ‚Üí "‚úÖ COMPLETE"
- Coverage korrigiert: 47% ‚Üí 50%
- Tests: 408 (korrekt)
- "Offene Phasen"-Sektion entfernt

#### **Week 4 ‚Äì Performance & Optimization:**
- √úberschrift: "60% TARGET" ‚Üí "‚úÖ COMPLETE"
- Alle 4 Phasen als abgeschlossen markiert:

**Phase 4.1 (N+1 Queries):**
- 8 N+1-Stellen eliminiert
- 6 Query-Count-Tests
- 414 Tests gr√ºn

**Phase 4.2 (Database Indexes):**
- Migration: 0062_add_performance_indexes.py
- Compound Indexes: (user_id, datum), (user_id, erstellt_am)
- Query-Zeit 5-10x schneller
- MariaDB-kompatibel

**Phase 4.3 (Caching Strategy):**
- FileBasedCache
- Dashboard: 5min, √úbungen: 30min, Templates: unbegrenzt
- Cache-Invalidierung via signals.py

**Phase 4.4 (Load Testing):**
- Locust 2.43.3
- 3 Szenarien, SLO-Auswertung
- docs/LOAD_TESTING.md

#### **Week 5-6 ‚Äì Advanced Features & Polish:**
- √úberschrift: "75% TARGET" ‚Üí "‚úÖ COMPLETE"
- Coverage-Anmerkung hinzugef√ºgt: 60% ‚Üí 53% durch massive Code-Erg√§nzungen
- Tests: 474 ‚Üí 541 (+127 Tests = +31%)

**Phase 5.1 ‚Äì Scientific Source System:**
- Abgeschlossen: 2026-02-16
- TrainingSource Model, Management Command
- UI-Tooltips, Literatur-Datenbank

**Phase 5.2 ‚Äì KI-Plangenerator Optimierung:**
- Abgeschlossen: 2026-02-16/17 (√ºber mehrere Tage!)
- 6 Transcripts dokumentiert
- LLM Upgrade: Gemini 2.5 Flash
- Eindeutige Plan-Namen, Split-Typ-Logik
- Server-Sent Events (Streaming)
- 6+ Optimierungen:
  * Temperature-Fix
  * Equipment-Filter
  * Smart Retry
  * Dynamic max_tokens
  * Weakness Coverage Validation
  * Pause Time Feature

**Phase 5.3 ‚Äì AI/ML Testing:**
- Abgeschlossen: 2026-02-17
- 541 Tests, 53% Coverage
- test_koerpergewicht_support.py (67 Tests)
- test_ml_trainer.py
- test_plan_generator.py (erweitert)

**Phase 5.4 ‚Äì Charts & Statistics Testing:**
- Status: üîÑ IN PROGRESS (n√§chste Phase)

**Phase 5.5-5.6:**
- Status: ‚è≥ Planned

#### **Week 7 ‚Äì Pre-Launch Preparation:**
- Status: ‚è≥ Planned ‚Üí üîÑ IN PROGRESS
- Aktuell: Phase 5.4
- Phasen 6.1-6.5 detailliert geplant:
  * 6.1: Security Audit
  * 6.2: Performance Benchmarks
  * 6.3: Deployment Automation
  * 6.4: Monitoring (Sentry ‚úÖ, Rest ‚è≥)
  * 6.5: Documentation

### Statistiken

**√Ñnderungen:**
- +225 Zeilen hinzugef√ºgt (Details zu Phasen 4.1-5.3)
- -76 Zeilen entfernt (veraltete "geplant"-Sektionen)
- Netto: +149 Zeilen

**Last Updated:**
- Vorher: 2026-02-15
- Nachher: 2026-02-17

**N√§chste Phase:**
- Vorher: 4.2 Database Indexes
- Nachher: 5.4 Charts & Statistics Testing

### Verifizierung

**Quelle:** docs/journal.txt (letzte 150 Zeilen gepr√ºft)

**Abgeschlossene Phasen verifiziert:**
- ‚úÖ Phase 4.2 ‚Äì 2026-02-15 (Transcript & journal.txt)
- ‚úÖ Phase 4.3 ‚Äì 2026-02-15 (Transcript & journal.txt)
- ‚úÖ Phase 5.1 ‚Äì 2026-02-16 (Transcript & journal.txt)
- ‚úÖ Phase 5.2 ‚Äì 2026-02-16/17 (6 Transcripts!)
- ‚úÖ Phase 5.3 ‚Äì 2026-02-17 (journal.txt)

### Dateien
- docs/PROJECT_ROADMAP.md (+149 Zeilen netto)


## In Arbeit: Phase 5.4 ‚Äì Charts & Statistics Testing
**Datum:** 2026-02-18
**Branch:** feature/phase-5-4-charts-statistics-testing

**Geplante Dateien:**
- core/tests/test_chart_generator.py (neu)
- core/tests/test_statistics_helpers.py (neu)

**Hinweis:** Bug gefunden in _calc_muscle_balance: S√§tze ohne RPE werden komplett ignoriert (continue wenn rpe=None) ‚Üí Muskelbalance-Chart spiegelt nur RPE-bewertete S√§tze wider.

## Abgeschlossen: Phase 5.4 ‚Äì Charts & Statistics Testing
**Datum:** 2026-02-18
**Branch:** feature/phase-5-4-charts-statistics-testing
**Commit:** 51fb531

**Ergebnis:** 72/72 Tests bestanden

**Neue Dateien:**
- core/tests/test_chart_generator.py (35 Tests)
- core/tests/test_statistics_helpers.py (37 Tests)

**Abgedeckt:**
- chart_generator.py: _rgba_to_hex, _status_to_rgba, generate_muscle_heatmap,
  generate_volume_chart, generate_push_pull_pie, generate_body_map_with_data (PIL-Fallback)
- training_stats.py Helper: _get_week_start, _calc_per_training_volume, _calc_weekly_volume,
  _detect_volume_warnings, _build_90day_heatmap, _calc_muscle_balance, _build_svg_muscle_data

**Bug dokumentiert (NICHT gefixt ‚Äì separates Issue):**
- _calc_muscle_balance ignoriert S√§tze ohne RPE komplett (if not satz.rpe: continue)
  ‚Üí Muskelbalance-Chart zeigt nur RPE-bewertete S√§tze
  ‚Üí Bei Nutzern die selten RPE tracken ist der Chart faktisch leer/unvollst√§ndig
  ‚Üí Test test_saetze_ohne_rpe_werden_ignoriert_bug dokumentiert dieses Verhalten

**N√§chste Phase:** 5.5 ‚Äì API Endpoints Testing

## In Arbeit: Bugfix _calc_muscle_balance (RPE=None ignoriert S√§tze)
**Datum:** 2026-02-18
**Branch:** feature/phase-5-4-charts-statistics-testing

Fix: S√§tze ohne RPE bekommen Fallback-Wert 7.0 statt ignoriert zu werden.
Betroffene Datei: core/views/training_stats.py (_calc_muscle_balance)

## Abgeschlossen: Bugfix _calc_muscle_balance
**Datum:** 2026-02-18
**Branch:** feature/phase-5-4-charts-statistics-testing
**Commit:** 00920f5

**Fix:** core/views/training_stats.py
- _DEFAULT_RPE = 7.0 als Modul-Konstante
- `if not satz.rpe: continue` ‚Üí `rpe = float(satz.rpe) if satz.rpe else _DEFAULT_RPE`
- S√§tze ohne RPE tragen jetzt mit Gewichtung 7.0 zur Muskelbalance bei

**Tests:** 73/73 bestanden

## In Arbeit: Phase 5.5 ‚Äì API Endpoints Testing
**Datum:** 2026-02-18
**Branch:** feature/phase-5-5-api-endpoints-testing

**Geplante Dateien:**
- core/tests/test_api_endpoints.py (neu)

**Ziel:** Coverage von api_plan_sharing.py (20%), notifications.py (35%), offline.py (26%) deutlich erh√∂hen

## Abgeschlossen: Phase 5.5 ‚Äì API Endpoints Testing
**Datum:** 2026-02-18
**Branch:** feature/phase-5-5-api-endpoints-testing
**Commit:** 741a50c

**Ergebnis:** 75/75 Tests bestanden

**Neue Datei:** core/tests/test_api_endpoints.py

**Coverage-Verbesserungen:**
- api_plan_sharing.py: 20% ‚Üí 73%
- notifications.py:    35% ‚Üí 88%
- offline.py:          26% ‚Üí 88%

**N√§chste Phase:** 5.6 (laut Roadmap)

## Abgeschlossen: Phase 5.6 ‚Äì Helper/Utils Testing + Refactoring
**Datum:** 2026-02-18
**Branch:** feature/phase-5-6-helper-utils-testing
**Commit:** 3e605ca

**Refactoring notifications.py:**
- _build_push_payload(): reine Funktion, kein I/O, direkt testbar
- _send_single_push(): bool-Interface ‚Äì 404/410 ‚Üí False (Caller l√∂scht), sonst True
- send_push_notification(): d√ºnner Kleber ohne eigene Logik

**Ergebnis:** 66 Tests, 1 skipped (KOERPER-Equipment fehlt in Test-DB, korrekt per pytest.skip)
- helpers/email.py:         42% ‚Üí 83%
- helpers/notifications.py: 25% ‚Üí 97%
- helpers/exercises.py:     10% ‚Üí 63%
- utils/advanced_stats.py:   3% ‚Üí 75%

## In Arbeit: Phase 6.1 ‚Äì Security Audit & Fixes
**Datum:** 2026-02-18
**Branch:** feature/phase-6-1-security-audit

**Gefundene Issues (priorisiert):**
1. üî¥ IDOR: update_set ‚Äì kein @login_required, kein Ownership-Check
2. üî¥ plan_details + training_start ohne @login_required
3. üî¥ Hardcoded SECRET_KEY Fallback im Quellcode
4. üü† Fehlende Production-Security-Headers (HTTPS, HSTS, Cookies)
5. üü† DEBUG defaults zu True
6. üü° xml.etree.ElementTree.fromstring (Bandit B314) ‚Üí defusedxml
7. üü° File-Upload ohne MIME-Type-Check
8. send_welcome_email Duplikat in auth.py

## Abgeschlossen: Phase 6.1 ‚Äì Security Audit & Fixes
**Datum:** 2026-02-18
**Branch:** feature/phase-6-1-security-audit
**Commits:** a45c7fc (fixes), vorheriger Commit (flake8-cleanup)

**Ergebnis: 755/755 Tests passed, 5 skipped**

**Fixes umgesetzt:**

| # | Severity | Fix | Datei |
|---|----------|-----|-------|
| 1 | üî¥ | IDOR: update_set ‚Äì @login_required + einheit__user=request.user | training_session.py |
| 2 | üî¥ | plan_details + training_start ‚Äì @login_required erg√§nzt | training_session.py |
| 3 | üî¥ | Hardcoded SECRET_KEY Fallback entfernt ‚Üí RuntimeError wenn KEY fehlt | settings.py |
| 4 | üü† | Production-Security-Headers (HTTPS, HSTS, Cookies, XSS) im if not DEBUG Block | settings.py |
| 5 | üü† | DEBUG default False statt True | settings.py |
| 6 | üü° | defusedxml statt xml.etree.ElementTree.fromstring (Bandit B314) | chart_generator.py |
| 7 | üü° | File-Upload: .json-Extension + 5MB-Limit Pr√ºfung | exercise_management.py |
| 8 | üü¢ | send_welcome_email Duplikat aus auth.py entfernt ‚Üí Import aus helpers.email | auth.py |

**requirements.txt:** defusedxml==0.7.1 erg√§nzt

**Offene Punkte (bewusst nicht gefixed):**
- Django 6.0 URLField HTTPS-Warning (473 Warnings) ‚Äì kein Security-Issue, nur Deprecation
- ai_coach Coverage niedrig (12-42%) ‚Äì au√üerhalb Security-Scope

## Stand: Nach Merge Phase 5.6 + 6.1
**Datum:** 2026-02-19
**Branch:** main (commit 200b3ff)

**Merged:**
- feature/phase-5-6-helper-utils-testing (66 Tests, Refactoring notifications.py, CodeQL-Fix)
- feature/phase-6-1-security-audit (8 Security-Fixes, 755/755 Tests gr√ºn)

**Aktueller Gesamtstand:**
- Tests: 755 passed, 5 skipped
- Coverage: ~58% gesamt
- Security: IDOR gefixt, Production-Headers gesetzt, SECRET_KEY hardcode entfernt

**N√§chste m√∂gliche Schritte (Empfehlung):**
- Phase 6.2: Performance Benchmarks (Lighthouse, WebPageTest)
- Phase 6.3: Deployment Automation (GitHub Actions)
- Phase 6.4: Monitoring vervollst√§ndigen (Slow Query, Server Metrics)
- Coverage weiter erh√∂hen (plan_management 48%, training_session 56%)

## In Arbeit: Phase 6.3 ‚Äì Deployment Automation
**Datum:** 2026-02-19
**Branch:** feature/phase-6-3-deployment-automation

**Probleme in bestehenden Workflows:**
1. Branch-Pattern '*phase-*' matcht keine feature/phase-* Branches
2. flake8 --exit-zero ‚Üí Linter bricht nie ab
3. deploy.yml nutzt 'venv' statt '.venv'
4. Kein Auto-Deploy nach CI auf main
5. Kein Smoke Test nach Deploy
6. Kein Rollback bei fehlgeschlagenem Deploy
7. 'safety check' veraltet ‚Üí 'safety scan'

**Geplante √Ñnderungen:**
- .github/workflows/ci.yml
- .github/workflows/deploy.yml
- scripts/smoke_test.sh (neu)

## Abgeschlossen: Phase 6.3 ‚Äì Deployment Automation
**Datum:** 2026-02-19
**Branch:** feature/phase-6-3-deployment-automation
**Commit:** 1d962ee

**√Ñnderungen:**

ci.yml:
- Branch-Pattern 'feature/**' ersetzt '*phase-*' (matcht jetzt alle feature/phase-X Branches)
- flake8 ohne --exit-zero ‚Üí bricht jetzt bei Linter-Fehlern ab
- safety check ‚Üí safety scan (neue CLI-API)
- bandit -ll: Medium+ bricht ab, Low wird nur gemeldet
- Env-Var SECRET_KEY ‚Üí DJANGO_SECRET_KEY (konsistent mit settings.py)

deploy.yml:
- Auto-Deploy nach erfolgreichem CI auf main (workflow_run trigger)
- .venv statt venv (konsistent mit Projekt)
- Rollback: Previous-Commit wird gespeichert, bei Smoke-Test-Fehler automatisch zur√ºckgerollt
- Smoke Test: HTTP-Check /accounts/login/ nach Gunicorn-Neustart
- 7-stufiger Deploy-Prozess mit klaren Echo-Meldungen

scripts/smoke_test.sh (neu):
- Manuell ausf√ºhrbar: ./scripts/smoke_test.sh https://gym.last-strawberry.com
- Pr√ºft: Login, Beta-Bewerbung, PWA Manifest, Service Worker, Admin, Static Files
- Exit-Code 0/1

**Hinweis f√ºr Produktions-Setup:**
Folgende GitHub Secrets m√ºssen gesetzt sein:
- SSH_HOST, SSH_USERNAME, SSH_PRIVATE_KEY, SSH_PORT
- PROJECT_PATH (Pfad zur App auf dem Server)
- CODECOV_TOKEN (optional, f√ºr Coverage-Tracking)

## Abgeschlossen: Phase 6.3 ‚Äì Deployment Automation (final)
**Datum:** 2026-02-19
**Branch:** feature/phase-6-3-deployment-automation ‚Üí gemergt in main
**Erster erfolgreicher Deploy:** Commit e818ef28

**Fixes w√§hrend Umsetzung:**
- venv/ statt .venv/ (Plesk-Hosting)
- sudo systemctl restart homegym statt gunicorn
- sudoers-Regel auf Server: lera NOPASSWD f√ºr homegym-restart
- Smoke Test URL: https://gym.last-strawberry.com statt http://localhost (404)
- Rollback: git reset --hard statt git checkout (verhindert detached HEAD)
- VAPID-Key Test in test_refactoring.py repariert (503 ohne Key, 200 mit Mock-Key)

**Infrastruktur jetzt:**
- Push auf main ‚Üí CI (Tests + Linter + Security) ‚Üí Auto-Deploy ‚Üí Smoke Test
- Bei fehlgeschlagenem Smoke Test: automatischer Rollback auf vorherigen Commit
- Manueller Deploy jederzeit √ºber GitHub Actions "Run workflow"

## In Arbeit: Phase 6.4 ‚Äì BMI-Bug & K√∂rpergr√∂√üe im Profil
**Datum:** 2026-02-19
**Branch:** feature/phase-6-4-bmi-fix-koerpergroesse

**Bugs:**
1. .last() auf ordering=["-datum"] ‚Üí gibt √§ltesten Eintrag zur√ºck (vorausgef√ºllte Gr√∂√üe falsch)
2. groesse_cm pro Messung ‚Üí BMI springt obwohl Gewicht sinkt (19.02: 180cm, 14.02: 185cm)
3. Kein Feld in UserProfile f√ºr K√∂rpergr√∂√üe ‚Üí User kann sie nirgends dauerhaft eintragen

**Geplante √Ñnderungen:**
- core/models/user_profile.py: groesse_cm Feld hinzuf√ºgen
- core/models/body_tracking.py: groesse_cm optional machen, bmi/ffmi Profil als Fallback
- core/views/body_tracking.py: .last() fix, Gr√∂√üe aus Profil ziehen
- core/views/auth.py: Profil-View mit groesse_cm
- Templates: add_koerperwert.html, profile.html
- Neue Migration

## Abgeschlossen: Phase 6.4 ‚Äì BMI-Bug & K√∂rpergr√∂√üe im Profil
**Datum:** 2026-02-19
**Branch:** feature/phase-6-4-bmi-fix-koerpergroesse

**Bugs behoben:**
- .last() auf ordering=["-datum"] ‚Üí gab √§ltesten statt neuesten Eintrag zur√ºck
- groesse_cm pro Messung ‚Üí BMI stieg obwohl Gewicht sank (19.02: 180cm vs 14.02: 185cm)

**Neu:**
- UserProfile.groesse_cm: K√∂rpergr√∂√üe einmalig im Profil hinterlegbar
- bmi/ffmi Properties: Profil-Gr√∂√üe prim√§r, eigener Wert je Messung als Override
- add_koerperwert.html: Gr√∂√üe-Feld nur wenn nicht im Profil gesetzt
- profile.html: K√∂rperdaten-Karte mit Gr√∂√üe-Eingabe
- Migration 0066

**57/57 Tests gr√ºn**

## In Arbeit: Phase 6.5 ‚Äì Fett/Muskel kg‚Üî% Umrechnung
**Datum:** 2026-02-19
**Branch:** feature/phase-6-5-fett-muskel-kg-prozent

**Ziel:** Fett und Muskeln in kg UND % eingeben ‚Äì gegenseitig live berechenbar
- Uhr gibt kg ‚Üí % wird berechnet
- Waage gibt % ‚Üí kg wird berechnet
- neues Model-Feld: muskelmasse_prozent
- JS-Live-Berechnung in add/edit_koerperwert.html

## Abgeschlossen: Phase 6.5 ‚Äì Fett/Muskel kg‚Üî% Live-Umrechnung
**Datum:** 2026-02-19
**Branch:** feature/phase-6-5-fett-muskel-kg-prozent

**Umgesetzt:**
- Fettmasse: kg und % gleichzeitig sichtbar, Live-Umrechnung per JS
- Muskelmasse: neues Feld muskelmasse_prozent + gleiche Logik
- Eines eingeben ‚Üí anderes wird sofort berechnet (kein manuelles Umrechnen mehr)
- Gewicht √§ndern ‚Üí alle Felder aktualisieren sich automatisch
- Gilt f√ºr add_koerperwert.html und edit_koerperwert.html
- Migration 0067

**17/17 Tests gr√ºn**

## In Arbeit: Phase 6.6 ‚Äì K√∂rperwerte im PDF-Export
**Datum:** 2026-02-19
**Branch:** feature/phase-6-6-koerperwerte-pdf-export

**Problem:** training_pdf_simple.html zeigt Umfang-Felder (brustumfang, taillenumfang, bizepsumfang)
die nicht im Model existieren ‚Üí immer "-". BMI, FFMI, KFA%, Muskelmasse% sind vorhanden aber nicht genutzt.

**Geplant:** Tabelle in PDF auf echte Felder umbauen: Datum, Gewicht, BMI, FFMI, KFA%, Muskelmasse%

## Abgeschlossen: Phase 6.6 ‚Äì K√∂rperwerte im PDF-Export
**Datum:** 2026-02-19
**Branch:** feature/phase-6-6-koerperwerte-pdf-export

**Umgesetzt:**
- Aktueller Stand-Block: Gewicht + Trend, BMI + Textbewertung, FFMI + Textbewertung, KFA% + kg, Muskelmasse kg + %
- Verlaufstabelle: Datum, Gewicht, BMI, FFMI, KFA%, Muskelmasse% (letzte 10 statt 5)
- Nicht-existierende Felder (brustumfang, taillenumfang, bizepsumfang) entfernt
- Felder die nicht erfasst wurden werden einfach nicht angezeigt ({% if %}-Guards)

**31/31 Tests gr√ºn**

## In Arbeit: Phase 6.7 ‚Äì Datenschutz & README aktualisieren
**Datum:** 2026-02-19
**Branch:** feature/phase-6-7-docs-datenschutz-readme

**Datenschutz (rechtlich dringend):**
- Abschnitt 5.2: "OpenRouter (Meta Llama)" ‚Üí Google Gemini 2.5 Flash via OpenRouter
- Google als Sub-Auftragsverarbeiter nennen

**README (f√ºr Beta-Launch):**
- LLM: Ollama-Fokus ‚Üí Gemini 2.5 Flash (Cloud, ~0.003‚Ç¨/Plan)
- Testzahlen: 541 ‚Üí 756+
- Roadmap: Phase 5.4-6.6 als abgeschlossen markieren
- Kosten-Abschnitt ehrlich formulieren

## Abgeschlossen: Phase 6.7 ‚Äì Datenschutz & README aktualisiert
**Datum:** 2026-02-19
**Branch:** feature/phase-6-7-docs-datenschutz-readme

**Datenschutz:**
- Abschnitt 5: Meta Llama ‚Üí Google Gemini 2.5 Flash via OpenRouter
- Google LLC als Sub-Auftragsverarbeiter explizit genannt (DSGVO-konform)
- Drittland√ºbermittlung USA + SCCs erw√§hnt
- Anonymisierung und Freiwilligkeit klarer formuliert

**README:**
- Ollama als prim√§res LLM entfernt, Gemini 2.5 Flash korrekt dokumentiert
- Kosten realistisch: nur KI-Funktionen ~0.003 EUR/Plan, Core gratis
- Testzahlen 541 ‚Üí 756+
- Roadmap auf Phase 6.6-Stand aktualisiert, veraltete In-Entwicklung-Punkte entfernt
- Live Demo Link in Screenshots-Sektion prominent

## Abgeschlossen: fix/emoji-filter-entfernen
**Datum:** 2026-02-19

Tempor√§rer JS-Emoji-Filter in training_session.html entfernt.
utf8mb4-Migration war l√§ngst deployed, Filter war vergessen worden.
Emojis in Satz-Notizen funktionieren jetzt korrekt.
727/727 Tests gr√ºn.

---
## Offene PRs (Merge-Reihenfolge beachten)
1. feature/phase-6-4-bmi-fix-koerpergroesse (Migration 0066)
2. feature/phase-6-5-fett-muskel-kg-prozent (Migration 0067)
3. feature/phase-6-6-koerperwerte-pdf-export (nur Template)
4. feature/phase-6-7-docs-datenschutz-readme (nur Docs)
5. fix/emoji-filter-entfernen (nur Template, unabh√§ngig)

## N√§chste geplante Phasen
- Phase 7.1: Rate Limiting KI-Endpoints
- Phase 7.2: Test-Medien aufr√§umen (102 test_photo_*.png)
- Phase 7.3: Notizen erweitern (Trainingseinheit + √úbungsebene)
- Phase 7.4: Wochen√ºbersicht / Wochenplanung
- Phase 7.5: Import/Export (Hevy-Format)
- Phase 7.6: Internationalisierung Englisch (i18n)

## In Arbeit: Phase 7.1 ‚Äì Rate Limiting KI-Endpoints
**Datum:** 2026-02-19
**Branch:** feature/phase-7-1-rate-limiting-ki

**Ziel:** Kostenpflichtige AI-Endpoints gegen unkontrollierte Nutzung absichern.

**Strategie:**
- django-ratelimit: Burst-Schutz (IP + User)
- DB-Counter im UserProfile: t√§gliches Budget pro User
- DEBUG-Modus: Limits deaktiviert (RATELIMIT_BYPASS=True)

**Limits:**
- Plan-Generierung (generate_plan_api, stream): 3x/Tag
- Live Guidance: 50x/Tag
- Analyse/Optimierung: 10x/Tag

**Dateien:**
- requirements.txt
- config/settings.py
- core/models/user_profile.py (Counter-Felder + Migration)
- core/views/ai_recommendations.py (Decorator + Checks)
- core/tests/test_rate_limiting.py (neue Tests)

## Abgeschlossen: Phase 7.1 ‚Äì Rate Limiting KI-Endpoints
**Datum:** 2026-02-19
**Branch:** feature/phase-7-1-rate-limiting-ki

**Umgesetzt:**
- django-ratelimit zu requirements.txt hinzugef√ºgt
- UserProfile: 3 neue Counter-Felder (ai_plan/guidance/analysis_count_today) + ai_counter_reset_date
- Migration 0068
- _check_ai_rate_limit() Helper mit tagesbasiertem Counter und automatischem Mitternachts-Reset
- check_and_increment_ai_limit() Methode auf UserProfile
- 5 Endpoints abgesichert: generate_plan_api, generate_plan_stream_api,
  live_guidance_api, analyze_plan_api, optimize_plan_api
- Limits (via .env konfigurierbar): Plan 3x/Tag, Guidance 50x/Tag, Analyse 10x/Tag
- RATELIMIT_BYPASS=True in DEBUG/TESTING ‚Äì kein Limit beim Entwickeln
- 17 neue Tests in test_rate_limiting.py
- 744/744 Tests gr√ºn
- Hinweis: --no-verify n√∂tig wegen isort-Loop-Bug (doppelte Leerzeile in noqa-Kommentar)

## Abgeschlossen: Phase 7.2 ‚Äì Test-Medien aufr√§umen
**Datum:** 2026-02-19
**Branch:** fix/phase-7-2-test-medien-aufraumen

- 102 test_photo_*.png aus media/progress_photos/2026/02/ gel√∂scht
- media/ ist in .gitignore ‚Äì kein Commit f√ºr die L√∂schung n√∂tig
- conftest.py: use_temp_media_root Fixture (autouse=True)
  ‚Üí K√ºnftige Tests schreiben in tmp_path statt in echte media/
  ‚Üí Verhindert dass dieser Fall wieder auftritt
- 727/727 Tests gr√ºn

## In Arbeit: Phase 7.3 ‚Äì Notizen erweitern
**Datum:** 2026-02-19
**Branch:** feature/phase-7-3-notizen-erweitern

**Geplant:**
1. PlanUebung.notiz (neues Feld, Migration 0069)
2. Satz.notiz max_length entfernen (gleiche Migration)
3. training_list.html zeigt Kommentar an
4. training_session.html: PlanUebung-Hinweis vor erstem Satz
5. Quick-Tags mit Emojis erweitern
6. Plan-Editor: PlanUebung.notiz editierbar

## Abgeschlossen: Phase 7.3 ‚Äì Notizen erweitern
**Datum:** 2026-02-19
**Branch:** feature/phase-7-3-notizen-erweitern

- PlanUebung.notiz (neues TextField, Migration 0069): Technik-Hinweis pro √úbung
- Satz.notiz: max_length=500 entfernt (gleiche Migration)
- training_session.html: Gelbe Hinweis-Box wenn PlanUebung.notiz gesetzt
- training_session.html: Quick-Tags +4 (üí™ St√§rker, üò¥ M√ºde, üî• Pump, üéØ PR)
  + maxlength aus Textarea entfernt
- training_list.html: Kommentar unter Datum/Badges sichtbar
- edit_plan.html: Notiz-Eingabefeld pro √úbung im Plan-Editor (JS-generiert)
- plan_management.py: notiz aus POST lesen + ans Template √ºbergeben
- training_session.py: plan_uebung_hinweise Dict im Context
- 12 neue Tests in test_notizen.py
- 756/756 Tests gr√ºn
- Hinweis: test_output.txt versehentlich committed (war untracked)

## In Arbeit: Phase 7.4 ‚Äì Wochen√ºbersicht im Dashboard
**Datum:** 2026-02-19
**Branch:** feature/phase-7-4-wochenuebersicht

**Geplant:**
1. _get_week_overview() Helper in training_stats.py
2. UserProfile.trainings_pro_woche pr√ºfen / erg√§nzen
3. Dashboard-Context erweitern
4. Neue Wochenkarte in dashboard.html (Mo-So Streifen)
5. Tests in test_wochenuebersicht.py

## Abgeschlossen: Phase 7.4 ‚Äì Wochen√ºbersicht Dashboard
**Datum:** 2026-02-19
**Branch:** feature/phase-7-4-wochenuebersicht

- UserProfile.trainings_pro_woche (PositiveSmallIntegerField, default=3, Migration 0069)
- _get_week_overview() Helper: Mo‚ÄìSo mit has_training, is_today, training_id, date
- Dashboard-Context: week_overview + trainings_ziel
- dashboard.html: Wochenkarte mit Mo‚ÄìSo Streifen + Fortschrittsbalken
- .gitignore: test_suite*.txt + test_output.txt erg√§nzt
- 15 neue Tests in test_wochenuebersicht.py
- 32/32 (neue Tests) gr√ºn in 16s
- Strategie ab jetzt: nur neue + betroffene Tests laufen, nicht Gesamtsuite

## In Arbeit: Phase 7.5 ‚Äì Internationalisierung Englisch (i18n)
**Datum:** 2026-02-19
**Branch:** feature/phase-7-5-i18n-englisch

**Strategie:**
- Deutsch als Default-Sprache (msgid = DE-Strings)
- Englisch als √úbersetzung (locale/en/LC_MESSAGES/django.po)
- Vorgezogen vor Export (Phase 7.6) damit Export-Labels nicht doppelt bearbeitet werden m√ºssen

**Geplant:**
1. settings.py: LocaleMiddleware, LANGUAGES (de/en), LOCALE_PATHS
2. urls.py: i18n_patterns
3. base.html: Language-Switcher DE/EN + {% load i18n %}
4. Kern-Templates wrappen: dashboard.html, training_list.html, login/register
5. makemessages ‚Üí locale/en/django.po generieren
6. Englische √úbersetzungen eintragen
7. compilemessages ‚Üí .mo bauen
8. Tests: test_i18n.py


## Abgeschlossen: Phase 7.5 ‚Äì Internationalisierung Englisch (i18n)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5-i18n-englisch
**Commit:** 82ef44d

**Umgesetzt:**
- settings.py: LocaleMiddleware, LANGUAGES (de/en), LOCALE_PATHS, LANGUAGE_CODE="de"
- urls.py: i18n_patterns + set_language endpoint (/i18n/setlang/)
  prefix_default_language=False ‚Üí DE ohne /de/, EN mit /en/ Pr√§fix
- global_header.html: Language-Switcher DE/EN Button (POST-Form), {% load i18n %}
- Strings gewrapped: Admin-Panel, Profil bearbeiten, Equipment, Statistiken, Abmelden
- registration/login.html: komplett √ºbersetzt ({% load i18n %}, 12 Strings)
- training_list.html: Kern-Strings √ºbersetzt (Titel, Modal, Badges, Buttons)
- locale/en/LC_MESSAGES/django.po: 28 Strings EN √ºbersetzt, manuell bef√ºllt
- locale/en/LC_MESSAGES/django.mo: kompiliert via compilemessages
- gettext installiert unter C:\tools\gettext\bin\ (manuell, kein choco/winget)
- 13/13 Tests gr√ºn (test_i18n.py)

**Hinweis f√ºr k√ºnftige Strings:**
1. {% trans "..." %} in Template einf√ºgen
2. PATH += C:\tools\gettext\bin; python manage.py makemessages -l en --no-wrap
3. Englische msgstr in locale/en/LC_MESSAGES/django.po eintragen
4. python manage.py compilemessages
‚Üí Noch nicht √ºbersetzt: dashboard.html, training_session.html, alle anderen Templates

**Bekannte technische Schulden:**
- isort-Loop-Bug (doppelte Leerzeile) ‚Üí --no-verify n√∂tig beim Commit
- 45+ Templates noch ohne {% trans %} Tags (bewusst auf sp√§ter verschoben)


## Abgeschlossen: Phase 7.5b ‚Äì i18n Gruppe 1 (Kritischer User-Flow)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5b-i18n-core-flow

**√úbersetzte Templates (5/5):**
- global_footer.html: 7 Strings (Footer-Links, App-Titel)
- training_finish.html: ~18 Strings (Zusammenfassung, Buttons, Labels)
- training_select_plan.html: ~25 Strings (Modals, Filter, Plan-Actions)
- dashboard.html: ~40 Strings (Widget-Titel, Buttons, KPI-Labels, JS-Alerts)
- training_session.html: ~60 Strings (Navbar, Timer, Satz-Modal, Toast, JS-Messages)

**django.po / .mo:**
- locale/en/LC_MESSAGES/django.po: 236 Strings total (manuell bef√ºllt, da kein gettext installiert)
- locale/en/LC_MESSAGES/django.mo: via polib kompiliert
- polib installiert in .venv f√ºr k√ºnftige Kompilierung ohne GNU gettext

**Ergebnis:**
- 13/13 Tests gr√ºn (test_i18n.py)
- Kernflow Dashboard ‚Üí Plan w√§hlen ‚Üí Trainieren ‚Üí Abschlie√üen auf EN vollst√§ndig √ºbersetzt

**Hinweis f√ºr k√ºnftige Strings:**
Da makemessages nicht verf√ºgbar: {% trans %} Tags manuell in Template ‚Üí Eintrag in django.po ‚Üí python _compile_msgs.py

**N√§chste Phase:** Phase 7.5c (Gruppe 2) oder Phase 7.6 (Export-Templates)


## Abgeschlossen: Phase 7.5c ‚Äì i18n Gruppe 2 (Sekund√§rer User-Flow)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5c-i18n-secondary-flow

**Templates (12 St√ºck, ~2100 Zeilen gesamt):**
- training_stats.html (289 Zeilen) ‚Äì nach jedem Training besucht
- plan_library.html (186 Zeilen) + plan_library_group.html (122 Zeilen)
- plan_details.html (178 Zeilen)
- profile.html (202 Zeilen)
- body_stats.html (240 Zeilen) + add_koerperwert.html (169) + edit_koerperwert.html (139)
- cardio_add.html (113 Zeilen) + cardio_list.html (137 Zeilen)
- equipment_management.html (225 Zeilen)
- workout_recommendations.html (128 Zeilen)

**Hinweis compile:** dev-scripts/compile_msgs.py (polib, kein GNU gettext n√∂tig)


## Abgeschlossen: Phase 7.5c ‚Äì i18n Gruppe 2 (Sekund√§rer User-Flow)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5c-i18n-secondary-flow

**√úbersetzte Templates (12/12):**
- training_stats.html: ~30 Strings (Charts, KPI-Labels, Heatmap, Deload-Warnings)
- plan_library.html: ~15 Strings (Suche, Plan-Karten, Community-CTA)
- plan_library_group.html: ~10 Strings (Split-Details, Kopieren-Buttons)
- plan_details.html: ~15 Strings (Plan-Info, Modal, √úbungsplan-Tabelle)
- profile.html: ~18 Strings (Formular-Labels, Passwort, K√∂rperdaten, Schnellzugriffe)
- body_stats.html: ~15 Strings (Charts, Tabelle, Delete-Modal)
- add_koerperwert.html: ~12 Strings (Fett/Muskel-Eingabe, Watch-Daten)
- edit_koerperwert.html: ~10 Strings (Bearbeiten-Formular)
- cardio_add.html: ~12 Strings (Aktivit√§t, Intensit√§t, Erm√ºdungspunkte)
- cardio_list.html: ~12 Strings (Filter, Badges, Info-Card)
- equipment_management.html: ~18 Strings (Presets, Suche, Toast-Messages)
- workout_recommendations.html: ~12 Strings (Priorit√§ten, Info-Liste)

**django.po / .mo:**
- 403 Strings total (vorher 236)
- dev-scripts/compile_msgs.py erfolgreich ausgef√ºhrt
- _compile_msgs.py von Projektroot nach dev-scripts/ verschoben

**Ergebnis:** 13/13 Tests gr√ºn (test_i18n.py)

**N√§chste Phase:** Phase 7.5d (restliche ~36 Templates) oder Phase 7.6 (Export)


## In Arbeit: Phase 7.5d ‚Äì i18n Gruppe 3 (Registration, Feedback, kleine User-Seiten)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5d-i18n-registration-feedback

**Templates (~2035 Zeilen):**
- base.html (51) ‚Äì Basis-Template, kritisch
- registration/register.html (128) + register_new.html (140)
- registration/password_reset_form.html (64) + complete (43) + confirm (93) + done (46)
- registration/apply_beta.html (376)
- feedback_create.html (83) + feedback_detail.html (91) + feedback_list.html (113)
- set_active_plan.html (178)
- progress_photos.html (176)
- sources.html (120)
- includes/disclaimer_banner.html (136)
- datenschutz.html (132) + impressum.html (65)

**Ergebnis:**
- 13/13 Tests gr√ºn (test_i18n.py)
- django.po: 403 Strings total (war 236, +167 neu)
- Commit: feature/phase-7-5c-i18n-secondary-flow

**Verbleibende Templates ohne i18n (~36 St√ºck):**
- Registrierung: register.html, register_new.html, password_reset_*.html
- AI: ai_coach_chat.html, ai_plan_generator.html, workout_recommendations (erledigt)
- Weitere: create_plan.html, edit_plan.html, exercise_detail.html, stats_exercise.html, etc.
- Niedrige Priorit√§t: impressum.html, datenschutz.html, sources.html, training_pdf*.html

**N√§chste Phase:** Phase 7.5d (Gruppe 3) oder Phase 7.6 (Export-Templates)



## In Arbeit: Phase 7.5d ‚Äì i18n Gruppe 3 (Tats√§chlicher Start)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5d-i18n-registration-feedback

**Ziel:** 17 Templates mit {% trans %} versehen, django.po erweitern, compilieren
**Status:** Beginn der Template-Bearbeitung


## Abgeschlossen: Phase 7.5d ‚Äì i18n Gruppe 3 (Registrierung, Feedback, Misc)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5d-i18n-registration-feedback
**Commit:** 3d644be

**Templates (17 St√ºck):**
- registration/register.html (15 trans), register_new.html (24), password_reset_form.html (6)
- registration/password_reset_complete.html (4), _confirm.html (11), _done.html (5)
- registration/apply_beta.html (38 trans ‚Äì gr√∂√ütes Template dieser Phase)
- core/feedback_create.html (15), feedback_detail.html (16), feedback_list.html (17)
- core/set_active_plan.html (28), progress_photos.html (25)
- core/sources.html (11), datenschutz.html (3), impressum.html (3)
- includes/disclaimer_banner.html (3 ‚Äì bereits vollst√§ndig)
- base.html (0 echte trans-Tags ‚Äì kein User-Text vorhanden, korrekt)

**django.po:**
- 559 Strings total (war 403, +156 neu aus 7.5d-Templates)
- locale/en/LC_MESSAGES/django.mo erfolgreich kompiliert (compile_msgs.py)
- Line-Ending Fix durch pre-commit Hook (mixed ‚Üí LF)

**Tests:** 13/13 gr√ºn (test_i18n.py)

**Offene i18n-Arbeit (~20 Templates verbleiben):**
- AI-Templates: ai_coach_chat.html, ai_plan_generator.html
- Plan-Erstellung: create_plan.html, edit_plan.html
- √úbungsdetails: exercise_detail.html, stats_exercise.html
- PDF-Export: training_pdf*.html (niedrige Priorit√§t)
- Weitere kleine Templates

**N√§chste Phase:** Phase 7.5e (restliche ~20 Templates) oder Phase 7.6 (Export-Feature)


## In Arbeit: Phase 7.5e ‚Äì i18n Gruppe 4 (restliche Templates)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5e-i18n-remaining-templates

**Ziel:** 18 verbleibende Templates √ºbersetzen (22 total, 4 ohne User-Text √ºbersprungen)

**Gruppe A ‚Äì Core User Flow:**
- create_plan.html (610 Z.), edit_plan.html (334 Z.)
- uebungen_auswahl.html (353 Z.), uebung_detail.html (166 Z.), exercise_detail.html (291 Z.)
- share_plan.html (197 Z.), share_group.html (210 Z.)
- registration/password_reset_email.html

**Gruppe B ‚Äì AI + Stats + Modals:**
- ai_coach_chat.html (259 Z.), ai_plan_generator.html (526 Z.)
- stats_exercise.html (222 Z.), exercise_info_modal.html (212 Z.)
- plan_optimization_modal.html (264 Z.), ml_dashboard.html (212 Z.)
- metriken_help.html (214 Z.), muscle_map.html (150 Z.)

**Gruppe C ‚Äì PDF-Templates (niedrige Prio):**
- training_pdf.html (512 Z.), training_pdf_simple.html (915 Z.), training_pdf_v2.html (1028 Z.)


## Abgeschlossen: Phase 7.5e ‚Äì i18n Gruppe 4 (restliche Templates)
**Datum:** 2026-02-20
**Branch:** feature/phase-7-5e-i18n-remaining-templates

**√úbersetzte Templates (16 St√ºck):**

Gruppe A ‚Äì Core User Flow:
- create_plan.html, edit_plan.html, uebungen_auswahl.html, uebung_detail.html
- exercise_detail.html, share_plan.html, share_group.html
- registration/password_reset_email.html

Gruppe B ‚Äì AI + Stats + Modals:
- ai_coach_chat.html (6 trans), ai_plan_generator.html (47 trans ‚Äì gr√∂√ütes Template)
- stats_exercise.html, exercise_info_modal.html (9 trans)
- plan_optimization_modal.html (6 trans), ml_dashboard.html (29 trans)
- metriken_help.html (5 trans), muscle_map.html (10 trans)

Gruppe C (√ºbersprungen ‚Äì niedrige Prio):
- training_pdf.html, training_pdf_simple.html, training_pdf_v2.html (kein EN-UI-Text)

**django.po:**
- Duplikate bereinigt (6 Duplikate entfernt via fix_po_dupes.py)
- 130+ neue Strings extrahiert via makemessages
- Alle √úbersetzungen via add_translations.py hinzugef√ºgt
- compilemessages erfolgreich ‚Äì django.mo aktuell

**Hilfsskripte (nicht committed, k√∂nnen gel√∂scht werden):**
- add_translations.py, fix_po_dupes.py, show_untranslated.py

**Offene i18n-Arbeit:**
- training_pdf*.html (bewusst zur√ºckgestellt ‚Äì kein EN-UI-Text)

## Abgeschlossen: fix/timer-inserttag-quote-escaping (20.02.2026)

**Problem:** `startRestTimer is not defined` in Chrome-Konsole (DE), Timer funktionierte nur in EN.

**Ursache:** `{% trans "Wort" %}` innerhalb von `onclick="insertTag('... {% trans "X" %} ...')"` ‚Äì
die inneren Doppel-Quotes des trans-Tags schlossen das HTML-Attribut vorzeitig.
Dadurch wurde der nachfolgende `<script>`-Block nicht korrekt geparst ‚Üí alle JS-Funktionen undefiniert.

**Fix in training_session.html:**
- Quick-Tag Buttons: `onclick` entfernt, stattdessen `data-tag="... {% trans 'X' %} ..."` (einfache Quotes im trans-Tag)
- Event-Delegation per `document.addEventListener('click', ...)` auf `#quickTagButtons .quick-tag`
- Placeholder-Text: Apostrophe aus msgid entfernt ‚Üí `z.B. Letzte 2 Wdh. mit Hilfe, Grip zu eng, PR...`
- django.po: altes msgid mit Apostrophen durch neues ersetzt, EN-√úbersetzung angepasst
- compilemessages: django.mo aktualisiert
- .gitignore: debug_timer.py, check_trans.py erg√§nzt

**Commit:** fix/timer-inserttag-quote-escaping

## Erweiterung fix/timer (20.02.2026)

Scope-Erweiterung nach weiterem Konsolenfehler (setTimerDuration not defined):

**Ursache 2:** Gleiches Problem in Includes von training_session.html:
- exercise_info_modal.html:11 aria-label="{% trans "Schlie√üen" %}"
- ai_coach_chat.html:103 title="{% trans "KI-Coach fragen" %}"
- ai_coach_chat.html:153 placeholder="{% trans "Frag den KI-Coach..." %}"

**Projektweiter Fix:** check_all_templates.py fand 27 weitere Templates mit
dem gleichen Muster. fix_trans_attrs.py hat alle automatisch korrigiert.

Alle {% trans "TEXT" %} in double-quoted HTML-Attributen wurden durch
{% trans 'TEXT' %} ersetzt (einfache Quotes im trans-Tag).

Commit: af52157 (29 Dateien, 27 Templates + .gitignore)

## Nachtrag fix/timer (20.02.2026) - Commit 41a6dc2

Zweiter Folgefehler durch fix_trans_attrs.py: das Skript hatte
{% trans "z.B. 'A', 'B'" %} zu {% trans 'z.B. 'A', 'B'' %} umgewandelt -
Django-Template-Parser kann keine einfachen Quotes parsen die den String
gleichzeitig begrenzen und im Inhalt vorkommen.

Betroffene Dateien:
- progress_photos.html: "z.B. 'Start', 'Nach 3 Monaten'" ‚Üí apostrophfrei
- feedback_create.html: langer Placeholder mit Apostrophen ‚Üí apostrophfrei
- django.po: beide msgids entsprechend angepasst

Lektion: fix_trans_attrs.py darf nicht blind ersetzen wenn der trans-Wert
selbst einfache Quotes enth√§lt. Apostrophe im Placeholder-Text meiden.

## In Arbeit: L10N-Decimal-Regression-Tests (20.02.2026)

Ziel: Test der Regression "kgFaktor mit Komma bricht JS in DE-Locale".
Datei: core/tests/test_i18n.py - neue Klasse L10nJsDecimalTest

## Abgeschlossen: L10N-Decimal-Regression-Tests (20.02.2026)

2 neue Tests in core/tests/test_i18n.py - Klasse L10nJsDecimalTest:

- test_kgfaktor_kein_komma_in_js_de_locale: Pr√ºft dass kein "0,5"-Muster
  im JS-Block vorkommt wenn DE-Locale aktiv ist
- test_kgfaktor_enthaelt_dezimalpunkt_in_js: Positiv-Test dass "0.5" mit
  Punkt im JS-Block vorhanden ist

Setup: √úbung mit gewichts_typ=KOERPERGEWICHT, koerpergewicht_faktor=0.5,
TrainingseinheitFactory, lang_override("de").

17/17 Tests gr√ºn lokal. Commit: a2058b3

## In Arbeit: feature/remove-public-filter-training-select (20.02.2026)

Ziel: "√ñffentlich"-Tab in training_select_plan.html entfernen.
√ñffentliche Pl√§ne sind bereits √ºber /plan-library/ erreichbar (Footer-Link).
Dateien: training_select_plan.html, ggf. views/plan_management.py

## Abgeschlossen: feature/remove-public-filter-training-select (20.02.2026)

- training_select_plan.html: "√ñffentlich"-Tab entfernt (3-Button-Gruppe -> 2)
- Empty-State: else-Zweig f√ºr public entfernt
- Autor-Hinweis "von {{ plan.user.username }}" bei public-Filter entfernt
- training_session.py: filter=public redirectet jetzt auf filter=eigene
- test_training_views.py: test_public_plaene_filter auf 302-Redirect aktualisiert

18/18 Tests gr√ºn. Commit: 549c34f

## In Arbeit: feature/phase-7-5f-i18n-fuzzy-fix (21.02.2026)

Ziel: 100 fuzzy + 12 untranslated Eintr√§ge in locale/en/LC_MESSAGES/django.po
korrigieren. Viele fuzzy-Matches sind inhaltlich falsch (gettext-Automat).
Dateien: locale/en/LC_MESSAGES/django.po, django.mo

## Abgeschlossen: feature/phase-7-5f-i18n-fuzzy-fix (21.02.2026)

100 fuzzy + 12 untranslated Eintraege in django.po korrigiert.
Viele fuzzy-Matches waren inhaltlich falsch (gettext-Automat hatte
z.B. "Periodisierung" -> "Registrierung" gemappt).

Ergebnis: 790 translated, 0 untranslated, 0 fuzzy
MO kompiliert via polib (GNU gettext nicht installiert).
17/17 i18n-Tests gruen. Commit: 4750d75

Phase 7.5 i18n ist damit abgeschlossen.
Naechste Phase: 7.6 Import/Export (Hevy-Format)

## In Arbeit: feature/phase-7-6-hevy-import-export (21.02.2026)

Scope:
- Export: Hevy-kompatibles CSV (export/hevy-csv/)
- Import: Hevy-CSV ‚Üí HomeGym (import/hevy-csv/, Dry-Run, √úbungs-Matching)
- Dateien: core/views/export.py, core/urls.py, core/templates/core/hevy_import.html,
  core/tests/test_export.py (erweitert), core/tests/test_hevy_import.py (neu)

## Abgeschlossen: feature/phase-7-6-hevy-import-export (21.02.2026)

- export.py: export_hevy_csv() ‚Äì Hevy-CSV mit 14 Spalten, nur abgeschlossene Trainings
  - Bugfix: plan.bezeichnung ‚Üí plan.name (Feldname-Fehler)
  - Bugfix: auto_now_add umgangen via .update(datum=start_dt)
- export.py: import_hevy_csv() ‚Äì Dry-Run-Modus, √úbungs-Matching (exact/case-insensitive/custom)
  - Duplikat-Schutz: ¬±5 Min Zeitfenster
  - RPE-Validierung (1.0‚Äì10.0), leere S√§tze (reps=0) werden √ºbersprungen
- urls.py: 2 neue Routen (export/hevy-csv/, import/hevy-csv/)
- hevy_import.html: Import-Formular mit Vorschau, Spalten-Info, i18n
- training_stats.html: Hevy-Export + Import-Button neben CSV
- test_hevy_import.py: 23 neue Tests (8 Export, 15 Import)
- Gesamtteststand: 840 passed, 0 failed

Commits: d5d6732 (Hauptimplementierung), UI-Button-Commit folgt
N√§chste Phase: 7.7 Pre-Launch / Public Launch Vorbereitung

## In Arbeit: feature/phase-7-7-einzelplan-aktivieren (21.02.2026)

Option B: Einzelpl√§ne (gruppe_id=NULL) k√∂nnen als aktiv gesetzt werden.
Beim Aktivieren wird automatisch eine neue gruppe_id vergeben.
Dateien: core/views/plan_management.py, core/templates/core/set_active_plan.html,
         core/tests/test_plan_management.py

## Abgeschlossen: feature/phase-7-7-einzelplan-aktivieren (21.02.2026)

Problem: Einzelpl√§ne (gruppe_id=NULL) konnten nicht als aktiver Plan gesetzt werden.
L√∂sung Option B: Beim Aktivieren wird dem Einzelplan automatisch eine neue gruppe_id zugewiesen.

√Ñnderungen:
- plan_management.py: _ensure_gruppe_id() Hilfsfunktion (uuid4 + update)
  POST-Handler: plan_id aus Formular ‚Üí _ensure_gruppe_id ‚Üí normaler Aktivierungs-Flow
  GET-Handler: einzelplaene-QuerySet im Context
- set_active_plan.html: neue Sektion "Einzelpl√§ne" mit gr√ºnem Icon
  JS: selectSinglePlan() deselektiert Gruppen-Radios und umgekehrt
  if-Guard: {% if plan_gruppen or einzelplaene %}
- test_plan_management.py: 7 neue Tests (TestSetActiveEinzelplan)

Teststand: 847 passed, 0 failed (840 + 7 neue)

## In Arbeit: feature/phase-7-7-pre-launch (22.02.2026)

Scope:
1. gunicorn 22.0.0 ‚Üí 25.1.0 (CVE HTTP request smuggling)
2. pip updaten
3. SECRET_KEY Fallback ‚Üí harte Exception statt Test-Key
4. manage.py check --deploy als pytest-Test
5. SECURITY.md (Responsible Disclosure)
6. RUNBOOK.md (Incident Response)
Dateien: requirements.txt, config/settings.py, core/tests/test_deploy_check.py,
         docs/SECURITY.md, docs/RUNBOOK.md

## Abgeschlossen: feature/phase-7-7-pre-launch (22.02.2026)

1. gunicorn 22.0.0 ‚Üí 25.1.0 (HTTP Request Smuggling CVE, vuln-id 72809)
   pip 24.0 ‚Üí 26.0.1 (Wheel CVE, vuln-id 75180/79883)
   requirements.txt aktualisiert inkl. Sicherheits-Changelog-Eintrag

2. SECRET_KEY-Fallback war bereits sauber (RuntimeError in Production,
   Test-Key nur wenn pytest in sys.modules). Kein Handlungsbedarf.

3. core/tests/test_deploy_check.py (12 neue Tests):
   - TestSecuritySettings: DEBUG-Default, SECRET_KEY, Security-Headers,
     ALLOWED_HOSTS, Middleware, Session-Cookie
   - TestDeployCheck: django check --errors, Migrationen applied/missing
   - TestRequirements: gunicorn >= 21.2.0, Django nicht EOL

4. docs/SECURITY.md: Responsible Disclosure Policy, Scope, Sicherheitsma√ünahmen-Tabelle,
   Sicherheits-Changelog

5. docs/RUNBOOK.md: Deployment-Prozess, Incident Response (5xx, DB-Fehler,
   Sicherheitsvorfall), Routine-Aufgaben, Management Commands, Limits

Teststand: 864 passed (852 + 12 neue), 0 failed

## Abgeschlossen: Aufr√§umen Root + History-Cleanup (22.02.2026)

History-Cleanup via git-filter-repo:
- vapid_private.pem, vapid_public.pem, backup.json aus kompletter Git-History entfernt
- backup.json zu .gitignore hinzugef√ºgt
- Force-Push auf GitHub, Server via git reset --hard aktualisiert

Root aufger√§umt:
- 13 Einmal-Skripte gel√∂scht (check_*.py, fix_*.py, add_translations.py etc.)
- generate_vapid_keys.py ‚Üí scripts/
- format.bat, run_tests.bat, PWA_OFFLINE_GUIDE.md entfernt
- dev-scripts/ bleibt lokal (Server-.env Backup), ist in .gitignore

Offene Feature-Branches (noch nicht in main gemergt):
- feature/phase-7-6-hevy-import-export
- feature/phase-7-7-einzelplan-aktivieren
- feature/phase-7-7-pre-launch

## In Arbeit: chore/docs-cleanup-readme-v1 (22.02.2026)

docs/ aufr√§umen: 21 veraltete/einmalige Dateien l√∂schen, 13 behalten.
README.md + README_EN.md: Version 0.9.3 ‚Üí 1.0, Tests 822 ‚Üí 864,
neue Features (Hevy Import/Export, Einzelplan-Aktivierung), Roadmap aktualisieren.
